<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ReviewHub ‚Äî Rate Spotify albums & anything (0.5‚Äî10)</title>
  <meta name="description" content="Paste a Spotify album link (or anything else), rate it 0.5‚Äî10 with decimals, and write a review. Login to manage and share your reviews.">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Login Modal -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Login to ReviewHub</h3>
        <button class="close-btn" id="closeLoginModal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="loginUsername">Username</label>
          <input id="loginUsername" type="text" placeholder="Enter your username" />
        </div>
        <div class="form-group">
          <label for="loginPassword">Password</label>
          <input id="loginPassword" type="password" placeholder="Enter your password" />
        </div>
        <div class="form-group">
          <button id="loginBtn" class="btn primary">Login</button>
          <button id="registerBtn" class="btn ghost">Register New Account</button>
        </div>
        <div id="loginError" class="error-msg" style="display:none"></div>
      </div>
    </div>
  </div>

  <!-- Share Modal -->
  <div id="shareModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Share Your Reviews</h3>
        <button class="close-btn" id="closeShareModal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Your Public Review Page</label>
          <div class="share-link-container">
            <input id="shareLink" type="text" readonly />
            <button id="copyLinkBtn" class="btn">Copy Link</button>
          </div>
          <div class="hint">Share this link with anyone to let them view your reviews. The link contains all your review data and works in any browser, including incognito mode.</div>
        </div>
      </div>
    </div>
  </div>

  <div class="app">
    <!-- User Bar -->
    <div id="userBar" class="user-bar" style="display:none">
      <div class="user-info">
        <span class="user-welcome">Welcome, <strong id="currentUser"></strong>!</span>
        <button id="shareReviewsBtn" class="btn ghost small">üîó Share Reviews</button>
      </div>
      <button id="logoutBtn" class="btn ghost small">Logout</button>
    </div>

    <!-- Login Prompt -->
    <div id="loginPrompt" class="login-prompt">
      <div class="card">
        <div class="bd" style="text-align:center; padding:40px">
          <h2>Welcome to ReviewHub</h2>
          <p>Login or create an account to start rating and reviewing albums</p>
          <button id="showLoginBtn" class="btn primary">Login / Register</button>
        </div>
      </div>
    </div>

    <!-- Main App Content -->
    <div id="mainContent" style="display:none">
      <div class="brand">
        <div class="logo" aria-hidden></div>
        <div>
          <h1>ReviewHub</h1>
          <div class="sub">Paste a Spotify album link or review anything. Scores are 0.5‚Äî10 with decimals. Share your reviews with friends.</div>
        </div>
      </div>

      <div class="tabs">
        <button class="tab active" data-tab="add">‚ûï Add Review</button>
        <button class="tab" data-tab="browse">üóÇÔ∏è Browse Reviews</button>
        <button class="tab" data-tab="about">‚ÑπÔ∏è About</button>
        <span class="right pill" id="statsPill">0 reviews</span>
      </div>

      <section id="tab-add" class="grid">
        <div class="card">
          <div class="hd"><strong>Add a Review</strong></div>
          <div class="bd">
            <div class="row">
              <div>
                <label for="type">Item type</label>
                <select id="type">
                  <option value="spotify">Spotify Album</option>
                  <option value="other">Other</option>
                </select>
              </div>
              <div id="otherTitleWrap" style="display:none">
                <label for="otherTitle">Title (for Other)</label>
                <input id="otherTitle" type="text" placeholder="e.g., My Favorite Pizza Place" />
              </div>
            </div>

            <div class="spacer"></div>

            <div id="spotifyInputWrap" class="row-1 row">
              <div>
                <label for="spotifyUrl">Spotify album link</label>
                <input id="spotifyUrl" type="text" placeholder="https://open.spotify.com/album/..." />
                <div class="hint">Paste any Spotify <strong>album</strong> URL. We'll pull its title/artist/cover using Spotify oEmbed.</div>
              </div>
            </div>

            <div id="otherFields" class="row" style="display:none">
              <div>
                <label for="otherSubtitle">Subtitle / Creator (optional)</label>
                <input id="otherSubtitle" type="text" placeholder="e.g., by Joe's Pizzeria" />
              </div>
              <div>
                <label for="otherImage">Image URL (optional)</label>
                <input id="otherImage" type="text" placeholder="https://example.com/cover.jpg" />
              </div>
            </div>

            <div class="spacer"></div>

            <div class="row-1 row">
              <div class="rating">
                <label for="score">Score</label>
                <input id="score" type="range" min="0.5" max="10" step="0.5" value="7" />
                <span class="pill"><span>Current:</span> <strong id="scoreOut">7.0</strong>/10</span>
              </div>
              <div class="manual-score">
                <label for="manualScore">Or type exact score (0.5-10.0)</label>
                <input id="manualScore" type="number" min="0.5" max="10" step="0.1" placeholder="e.g., 8.7" />
              </div>
            </div>

            <div class="spacer"></div>

            <div class="row-1 row">
              <div>
                <label for="review">Your review</label>
                <textarea id="review" rows="5" placeholder="Say why you rated it like that‚Ä¶"></textarea>
              </div>
            </div>

            <div class="spacer"></div>

            <div class="toolbar">
              <button id="previewBtn" class="btn">üîç Preview</button>
              <button id="saveBtn" class="btn primary">üíæ Save Review</button>
              <button id="clearFormBtn" class="btn ghost" title="Clear just the form fields">üßπ Clear Form</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="hd"><strong>Preview</strong></div>
          <div class="bd" id="previewPane">
            <div class="empty">No preview yet. Fill the form and click <em>Preview</em>.</div>
          </div>
        </div>
      </section>

      <section id="tab-browse" style="display:none">
        <div class="card">
          <div class="hd"><strong>Browse & Manage</strong></div>
          <div class="bd">
            <div class="toolbar" style="margin-bottom:12px">
              <input id="q" type="text" placeholder="Search title/artist/text‚Ä¶" style="max-width:360px">
              <select id="filterType">
                <option value="all">All types</option>
                <option value="spotify">Spotify albums</option>
                <option value="other">Other</option>
              </select>
              <select id="sortBy">
                <option value="date-desc">Newest</option>
                <option value="date-asc">Oldest</option>
                <option value="score-desc">Highest score</option>
                <option value="score-asc">Lowest score</option>
                <option value="title-asc">Title A‚ÜíZ</option>
                <option value="title-desc">Title Z‚ÜíA</option>
              </select>
              <button id="exportBtn" class="btn">‚¨áÔ∏è Export JSON</button>
              <label class="btn" for="importInput" style="cursor:pointer">‚¨ÜÔ∏è Import JSON</label>
              <input id="importInput" type="file" accept="application/json" style="display:none" />
              <button id="wipeBtn" class="btn danger right" title="Delete ALL saved reviews">üóëÔ∏è Wipe All</button>
            </div>
            <div id="list" class="review-list"></div>
            <div id="emptyList" class="empty" style="display:none">No reviews yet. Add one on the <strong>Add Review</strong> tab.</div>
          </div>
        </div>
      </section>

      <section id="tab-about" style="display:none">
        <div class="card">
          <div class="hd"><strong>About</strong></div>
          <div class="bd">
            <p><strong>ReviewHub</strong> is a review tool for rating albums and anything else. Paste a Spotify album URL or enter anything, rate 0.5‚Äî10 with decimal precision, and write detailed reviews.</p>
            <ul>
              <li>Supports decimal ratings (e.g., 8.5, 9.2) for precise scoring</li>
              <li>User accounts with login/registration system</li>
              <li>Share your review collection with a public link</li>
              <li>Spotify data uses the public <em>oEmbed</em> endpoint (no API keys)</li>
              <li>Export/Import lets you back up or move your reviews</li>
            </ul>
          </div>
        </div>
      </section>
    </div>

    <!-- Public View (for shared links) -->
    <div id="publicView" style="display:none">
      <div class="brand">
        <div class="logo" aria-hidden></div>
        <div>
          <h1>ReviewHub</h1>
          <div class="sub">Public Reviews by <strong id="publicUsername"></strong></div>
        </div>
      </div>
      
      <div class="card">
        <div class="hd"><strong>Reviews</strong></div>
        <div class="bd">
          <div id="publicList" class="review-list"></div>
          <div id="publicEmpty" class="empty">No reviews found for this user.</div>
        </div>
      </div>
    </div>
  </div>

  <template id="reviewCardTpl">
    <div class="r-card">
      <img class="r-cover" alt="Cover" />
      <div>
        <div class="r-title"></div>
        <div class="r-sub"></div>
        <div class="r-meta" style="margin-top:8px">
          <span class="score"></span>
          <span class="tag"></span>
          <span class="time"></span>
        </div>
        <div class="r-text"></div>
        <div class="toolbar" style="margin-top:10px">
          <button class="btn ghost" data-action="edit">‚úèÔ∏è Edit</button>
          <button class="btn ghost" data-action="dup">üìÑ Duplicate</button>
          <button class="btn danger" data-action="del">üóëÔ∏è Delete</button>
        </div>
      </div>
    </div>
  </template>

  <template id="publicReviewCardTpl">
    <div class="r-card">
      <img class="r-cover" alt="Cover" />
      <div>
        <div class="r-title"></div>
        <div class="r-sub"></div>
        <div class="r-meta" style="margin-top:8px">
          <span class="score"></span>
          <span class="tag"></span>
          <span class="time"></span>
        </div>
        <div class="r-text"></div>
      </div>
    </div>
  </template>

  <script src="script.js"></script>
</body>
</html>
